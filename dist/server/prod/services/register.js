"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var db = require("../db/pg");
var createAdmin = 'INSERT INTO administrator(admin_first_name, admin_last_name, admin_username, admin_password) VALUES ($1,$2,$3,$4)';
var getAdmin = 'SELECT * FROM administrator WHERE admin_id=$1';
var updateAdmin = 'UPDATE administrator SET admin_first_name=$1, admin_last_name=$2, admin_password=$3 WHERE admin_id=$4';
function register(app) {
    var admin;
    app.get('/register/getAdmin', function (req, res, next) {
        res.contentType('application/json');
        db.query(getAdmin, [req.query.id], function (err, result) {
            if (err) {
                console.error(err);
                result.send('Error ' + err);
            }
            else {
                res.json(result.rows[0]);
            }
        });
    });
    app.post("/register", function (req, res) {
        db.query(createAdmin, [req.body.name, req.body.last, req.body.username, req.body.password], function (err, result) {
            if (err) {
                console.error(err.code);
                res.send(err.code);
            }
            else {
                res.json(result);
            }
        });
    });
    app.put("/register/update", function (req, res) {
        db.query(updateAdmin, [req.body.name, req.body.last, req.body.password, req.body.id], function (err, result) {
            if (err) {
                console.error(err);
                res.send(err);
                res.send(err.code);
            }
            else {
                res.json(result.rows);
            }
        });
    });
}
exports.register = register;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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Ijoic2VydmljZXMvcmVnaXN0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0ICogYXMgZGIgZnJvbSAnLi4vZGIvcGcnO1xuXG52YXIgY3JlYXRlQWRtaW4gPSAnSU5TRVJUIElOVE8gYWRtaW5pc3RyYXRvcihhZG1pbl9maXJzdF9uYW1lLCBhZG1pbl9sYXN0X25hbWUsIGFkbWluX3VzZXJuYW1lLCBhZG1pbl9wYXNzd29yZCkgVkFMVUVTICgkMSwkMiwkMywkNCknO1xudmFyIGdldEFkbWluPSAnU0VMRUNUICogRlJPTSBhZG1pbmlzdHJhdG9yIFdIRVJFIGFkbWluX2lkPSQxJztcbnZhciB1cGRhdGVBZG1pbiA9ICdVUERBVEUgYWRtaW5pc3RyYXRvciBTRVQgYWRtaW5fZmlyc3RfbmFtZT0kMSwgYWRtaW5fbGFzdF9uYW1lPSQyLCBhZG1pbl9wYXNzd29yZD0kMyBXSEVSRSBhZG1pbl9pZD0kNCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlcihhcHA6IGV4cHJlc3MuQXBwbGljYXRpb24pIHtcbnZhciBhZG1pbjtcblxuYXBwLmdldCgnL3JlZ2lzdGVyL2dldEFkbWluJywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgcmVzLmNvbnRlbnRUeXBlKCdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgZGIucXVlcnkoZ2V0QWRtaW4sIFtyZXEucXVlcnkuaWRdLCAoZXJyOmFueSwgcmVzdWx0OmFueSkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICByZXN1bHQuc2VuZCgnRXJyb3IgJyArIGVycik7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIHJlcy5qc29uKHJlc3VsdC5yb3dzWzBdKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbi8vTWV0aG9kIHRvIHZhbGlkYXRlIExvZ2luIGluZm8gd2l0aCBkYlxuYXBwLnBvc3QoYC9yZWdpc3RlcmAsIChyZXE6YW55LCByZXM6YW55KSA9PiB7XG4gIGRiLnF1ZXJ5KGNyZWF0ZUFkbWluLFtyZXEuYm9keS5uYW1lLCByZXEuYm9keS5sYXN0LCByZXEuYm9keS51c2VybmFtZSwgcmVxLmJvZHkucGFzc3dvcmRdICwoZXJyOmFueSwgcmVzdWx0OmFueSkgPT4ge1xuICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIuY29kZSk7XG4gICAgICAgIHJlcy5zZW5kKGVyci5jb2RlKTtcbiAgICB9ZWxzZSB7XG4gICAgICAgIHJlcy5qc29uKHJlc3VsdCk7XG4gICAgfVxuICAgIH0pO1xufSk7XG5cbmFwcC5wdXQoYC9yZWdpc3Rlci91cGRhdGVgLCAocmVxOmFueSwgcmVzOmFueSkgPT4ge1xuICAgIGRiLnF1ZXJ5KHVwZGF0ZUFkbWluLFtyZXEuYm9keS5uYW1lLCByZXEuYm9keS5sYXN0LCByZXEuYm9keS5wYXNzd29yZCwgcmVxLmJvZHkuaWRdICwoZXJyOmFueSwgcmVzdWx0OmFueSkgPT4ge1xuICAgICAgICBpZiAoZXJyKXsgXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7IHJlcy5zZW5kKGVycik7IFxuICAgICAgICAgICAgcmVzLnNlbmQoZXJyLmNvZGUpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICByZXMuanNvbihyZXN1bHQucm93cyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xufVxuIl19
